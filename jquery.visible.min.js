(function(e){var t=e(window);e.fn.visible=function(n,r,i,s){if(this.length<1)return;var o=s?e(s):t,u=this.length>1?this.eq(0):this,a=u.get(0),f=o.width(),l=o.height(),i=i?i:"both",c=r===true?a.offsetWidth*a.offsetHeight:true;if(!s&&typeof a.getBoundingClientRect==="function"){var h=a.getBoundingClientRect(),p=h.top>=0&&h.top<l,d=h.bottom>0&&h.bottom<=l,v=h.left>=0&&h.left<f,m=h.right>0&&h.right<=f,g=n?p||d:p&&d,y=n?v||v:v&&m;if(i==="both")return c&&g&&y;else if(i==="vertical")return c&&g;else if(i==="horizontal")return c&&y}else{var b=s?o.offset():null,w=s?b.top:o.scrollTop(),E=w+l,S=s?b.left:o.scrollLeft(),x=S+f,T=u.offset(),N=T.top,C=N+u.height(),k=T.left,L=k+u.width(),A=n===true?C:N,O=n===true?N:C,M=n===true?L:k,_=n===true?k:L;if(i==="both")return!!c&&O<=E&&A>=w&&_<=x&&M>=S;else if(i==="vertical")return!!c&&O<=E&&A>=w;else if(i==="horizontal")return!!c&&_<=x&&M>=S}}})(jQuery)
